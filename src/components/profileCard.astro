---
import { renderRTF } from '../utils/strapiParser';
const STRAPI_ROOT = import.meta.env.STRAPI_ROOT;

const resp = await fetch(`${STRAPI_ROOT}/api/profile-card?populate=*`);
const json = await resp.json();
const profileData = json.data;
const renderedBio = renderRTF(profileData.bio);
---


  <div class="profile-card">
      {profileData.headshot.url && (
        <img src=`${profileData.headshot.url}` alt=`${profileData.name} Headshot` class="profile-card--img" />
      )}
       <div class="profile-card--content">
        <h1 class="h2 center">{profileData.name}</h1>
           <div set:html={renderedBio} />
           <a href="mailto:adam@snape.xyz" class="btn-primary">Contact me</a>
       </div>
  </div>


<style>
    body {
        min-height: 100vh;
        display: grid;
        place-items: center;
    }

    h1 {
        font-size: var(--fs-h4);
    }

    .profile-card--content{
        width: min(90vw, 600px);
        padding: 2rem;
        padding-top: calc( 50px + 1rem);
        margin-top: -50px;
        border-top: 1px solid color(from var(--clr-secondary) srgb r g b / 0.5);
        background: color(from var(--clr-secondary) srgb r g b / 0.05);
        position: relative;

        &::before,
        &::after {
            content: "";
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 50%;
            height: 1px;
            background: color(from var(--clr-secondary) srgb r g b / 0.5);
            z-index: -1;
        }

        &:after {
            top: 10px;;
        }
    }

    .profile-card--img {
        width: 100px;
        height: 100px;
        border-radius: 50%;
        object-fit: cover;
        margin-bottom: 1rem;
        border: 1px solid color(from var(--clr-secondary) srgb r g b / 0.5);
        margin: 0 auto;
        display: block;
        z-index: 1;
        position: relative;
    }

</style>